{"version":3,"sources":["src/NumberInput.js"],"names":[],"mappings":"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","file":"NumberInput.js","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\r\nimport {string, number, func, shape, oneOf, object} from 'prop-types'\r\n\r\nconst NumberInput = ({ inputMode, onChange, onFocus, onBlur, defaultValue, localeOptions, ...rest }) => {\r\n  const [lastValue, setLastValue] = useState(+defaultValue||'')\r\n  const [value, setValue] = useState(+defaultValue||'')\r\n  const [type, setType] = useState('number')\r\n  const isMounted = useRef()\r\n  const inputRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    if( isMounted.current ){\r\n      numberToText(+defaultValue)\r\n    }\r\n  }, [defaultValue])\r\n\r\n  useEffect(() => {\r\n    numberToText()\r\n    isMounted.current = true\r\n  }, [])\r\n\r\n  function textToNumber(){\r\n    setType('number')\r\n    setValue(lastValue)\r\n  }\r\n\r\n  function numberToText( num = value ){\r\n    setType('')\r\n    setLastValue(num||'')\r\n    setValue( num == '' ? '' : (+num).toLocaleString(undefined, localeOptions) )\r\n  }\r\n\r\n  function onFocusLocal(e){\r\n    textToNumber()\r\n    onFocus && onFocus(e)\r\n  }\r\n\r\n  function onBlurLocal(e){\r\n    numberToText()\r\n    onBlur && onBlur(e)\r\n  }\r\n\r\n  function onChangeLocal(){\r\n    setValue(inputRef.current.value)\r\n    onChange && onChange(inputRef.current)\r\n  }\r\n\r\n  return <input {...rest}\r\n    ref={inputRef}\r\n    type={type}\r\n    value={value}\r\n    inputMode={inputMode || 'decimal'}\r\n    onChange={onChangeLocal}\r\n    onFocus={onFocusLocal}\r\n    onBlur={onBlurLocal} />\r\n}\r\nNumberInput.propTypes = {\r\n  className    : string,\r\n  placeholder  : string,\r\n  name         : string,\r\n  inputMode    : string,\r\n  onChange     : func,\r\n  defaultValue : number,\r\n\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat\r\n  localeOptions: shape({\r\n    maximumFractionDigits   : number,\r\n    minimumSignificantDigits: number,\r\n    maximumSignificantDigits: number,\r\n    style                   : object,\r\n    numberingSystem         : string,\r\n    currencySign            : string,\r\n    currency                : string,\r\n    unit                    : string,\r\n    style                   : oneOf(['decimal', 'currency', 'percent', 'unit']),\r\n    unitDisplay             : oneOf(['long', 'short', 'narrow']),\r\n    currencyDisplay         : oneOf(['symbol', 'narrowSymbol', 'code', 'name']),\r\n    notation                : oneOf(['standard', 'scientific', 'engineering', 'compact']),\r\n    signDisplay             : oneOf(['auto', 'never', 'always', 'exceptZero']),\r\n  })\r\n}\r\n\r\nexport default NumberInput"]}